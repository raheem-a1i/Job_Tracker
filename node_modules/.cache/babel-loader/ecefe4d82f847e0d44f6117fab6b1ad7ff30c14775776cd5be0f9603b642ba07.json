{"ast":null,"code":"var _jsxFileName = \"/home/raheem-a1i/github-test/app-tracker/src/components/ListJobs.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from \"react\";\nimport UpdateJobs from \"./UpdateJobs\";\nimport StatusCounts from \"./StatusCounts\";\nimport { Typeahead } from 'react-bootstrap-typeahead';\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\nimport { decodeHTMLEntities } from \"./Helper\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ListJobs = _ref => {\n  _s();\n  let {\n    refreshJobList,\n    jobsList\n  } = _ref;\n  const [selectedCompany, setSelectedCompany] = useState('');\n  const [filteredJobsList, setFilteredJobsList] = useState([]);\n  const [isSearchClicked, setIsSearchClicked] = useState(false);\n  const [selectedStatus, setSelectedStatus] = useState('All');\n  const sortJobs = jobsList.sort((a, b) => b.date_applied.localeCompare(a.date_applied)).reduce((acc, job) => {\n    const date = job.date_applied;\n    acc[date] = acc[date] || [];\n    acc[date].push(job);\n    return acc;\n  }, {});\n  const sortedJobsList = Object.values(sortJobs).flatMap(jobsDate => jobsDate.sort((a, b) => b.id - a.id));\n  const handleFilter = () => {\n    const filteredList = jobsList.filter(job => job.company_name === selectedCompany);\n    setFilteredJobsList(filteredList);\n    setIsSearchClicked(true);\n  };\n  useEffect(() => {\n    const filteredList = jobsList.filter(job => job.company_name === selectedCompany);\n    setFilteredJobsList(filteredList);\n  }, [jobsList, selectedCompany]);\n  const handleClear = () => {\n    setSelectedCompany(\"\");\n    setIsSearchClicked(false);\n    setFilteredJobsList([]);\n    typeaheadRef.current.clear();\n  };\n  const baseList = isSearchClicked ? filteredJobsList : sortedJobsList;\n  const jobsToRender = selectedStatus && selectedStatus !== 'All' ? baseList.filter(job => job.app_status === selectedStatus) : baseList;\n  const typeaheadRef = useRef();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sticky-count\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"list-header\",\n        children: [\"Applications: \", jobsList.length]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StatusCounts, {\n        jobsList: jobsList,\n        selectedStatus: selectedStatus,\n        setSelectedStatus: setSelectedStatus\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"job-filter\",\n        children: [/*#__PURE__*/_jsxDEV(Typeahead, {\n          id: \"company-search\",\n          labelKey: \"company_name\",\n          options: jobsList,\n          minLength: 1,\n          placeholder: \"Search by company name...\",\n          onChange: selected => {\n            var _selected$;\n            return setSelectedCompany(((_selected$ = selected[0]) === null || _selected$ === void 0 ? void 0 : _selected$.company_name) || \"\");\n          },\n          ref: typeaheadRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"search-button btn btn-light\",\n          type: \"button\",\n          onClick: handleFilter,\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), isSearchClicked && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"clear-button btn btn-light\",\n          type: \"button\",\n          onClick: handleClear,\n          children: \"Clear\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 14\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"job-list\",\n      children: jobsToRender.map(job => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"job\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"company-name\",\n          children: decodeHTMLEntities(job.company_name)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"job-role\",\n          children: job.job_role\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"job-salary\",\n          children: job.job_salary\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this), job.notes && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"job-notes\",\n          children: [\"Notes: \", job.notes]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Applied on:\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this), new Date(job.date_applied).toLocaleDateString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"status-style\",\n          children: [\"Status:\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 15\n          }, this), job.app_status]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"update-button\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn\",\n            \"data-bs-toggle\": \"modal\",\n            \"data-bs-target\": `#id${job.id}`,\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-pencil-square\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(UpdateJobs, {\n          job: job,\n          jobsList: jobsList,\n          refreshJobList: refreshJobList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this)]\n      }, job.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(ListJobs, \"gvkoeJKG1ZNaSnfqITvHbjC8wos=\");\n_c = ListJobs;\nexport default ListJobs;\nvar _c;\n$RefreshReg$(_c, \"ListJobs\");","map":{"version":3,"names":["React","useEffect","useState","useRef","UpdateJobs","StatusCounts","Typeahead","decodeHTMLEntities","ListJobs","refreshJobList","jobsList","selectedCompany","setSelectedCompany","filteredJobsList","setFilteredJobsList","isSearchClicked","setIsSearchClicked","selectedStatus","setSelectedStatus","sortJobs","sort","a","b","date_applied","localeCompare","reduce","acc","job","date","push","sortedJobsList","Object","values","flatMap","jobsDate","id","handleFilter","filteredList","filter","company_name","handleClear","typeaheadRef","current","clear","baseList","jobsToRender","app_status","length","selected","map","job_role","job_salary","notes","Date","toLocaleDateString"],"sources":["/home/raheem-a1i/github-test/app-tracker/src/components/ListJobs.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport UpdateJobs from \"./UpdateJobs\";\nimport StatusCounts from \"./StatusCounts\";\nimport { Typeahead } from 'react-bootstrap-typeahead';\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\nimport { decodeHTMLEntities } from \"./Helper\";\n\nconst ListJobs = ({ refreshJobList, jobsList }) => {\n  const [selectedCompany, setSelectedCompany] = useState('');\n  const [filteredJobsList, setFilteredJobsList] = useState([]);\n  const [isSearchClicked, setIsSearchClicked] = useState(false);\n  const [selectedStatus, setSelectedStatus] = useState('All');\n\n  const sortJobs = jobsList\n    .sort((a, b) => b.date_applied.localeCompare(a.date_applied))\n    .reduce((acc, job) => {\n      const date = job.date_applied;\n      acc[date] = acc[date] || [];\n      acc[date].push(job);\n      return acc;\n    }, {});\n\n  const sortedJobsList = Object.values(sortJobs).flatMap((jobsDate) =>\n    jobsDate.sort((a, b) => b.id - a.id)\n  );\n\n  const handleFilter = () => {\n    const filteredList = jobsList.filter(\n      (job) => job.company_name === selectedCompany\n    );\n    setFilteredJobsList(filteredList);\n    setIsSearchClicked(true);\n  };\n\n  useEffect(() => {\n    const filteredList = jobsList.filter(\n      (job) => job.company_name === selectedCompany\n    );\n    setFilteredJobsList(filteredList);\n  }, [jobsList, selectedCompany]);\n\n  const handleClear = () => {\n    setSelectedCompany(\"\");\n    setIsSearchClicked(false);\n    setFilteredJobsList([]);\n    typeaheadRef.current.clear();\n  };\n\n  const baseList = isSearchClicked ? filteredJobsList : sortedJobsList;\n  const jobsToRender = selectedStatus && selectedStatus !== 'All'\n    ? baseList.filter((job) => job.app_status === selectedStatus)\n    : baseList;\n\n  const typeaheadRef = useRef();\n\n  return (\n    <div>\n      <div className=\"sticky-count\">\n        <h1 className=\"list-header\">Applications: {jobsList.length}</h1>\n        <StatusCounts \n          jobsList={jobsList}\n          selectedStatus={selectedStatus}\n          setSelectedStatus={setSelectedStatus}\n        />\n        <div className=\"job-filter\">\n          <Typeahead\n            id=\"company-search\"\n            labelKey=\"company_name\"\n            options={jobsList}\n            minLength={1}\n            placeholder=\"Search by company name...\"\n            onChange={(selected) =>\n              setSelectedCompany(selected[0]?.company_name || \"\")\n            }\n            ref={typeaheadRef}\n          />\n          <button\n            className=\"search-button btn btn-light\"\n            type=\"button\"\n            onClick={handleFilter}\n          >\n            <i className=\"bi bi-search\"></i>\n          </button>\n          {\n            isSearchClicked\n            &&\n            (<button\n              className=\"clear-button btn btn-light\"\n              type=\"button\"\n              onClick={handleClear}>Clear</button>)\n          }\n        </div>\n      </div>\n      <div className=\"job-list\">\n        {jobsToRender.map((job) => (\n          <div className=\"job\" key={job.id}>\n            <div className=\"company-name\">\n              {decodeHTMLEntities(job.company_name)}\n            </div>\n            <p className=\"job-role\">{job.job_role}</p>\n            <p className=\"job-salary\">{job.job_salary}</p>\n            {job.notes && <p className=\"job-notes\">Notes: {job.notes}</p>}\n            <span>\n              Applied on:\n              <br />\n              {new Date(job.date_applied).toLocaleDateString()}\n            </span>\n            <p className=\"status-style\">\n              Status:\n              <br />\n              {job.app_status}\n            </p>\n            <div className=\"update-button\">\n              <button\n                type=\"button\"\n                className=\"btn\"\n                data-bs-toggle=\"modal\"\n                data-bs-target={`#id${job.id}`}\n              >\n                <i className=\"bi bi-pencil-square\"></i>\n              </button>\n            </div>\n            <UpdateJobs\n              job={job}\n              jobsList={jobsList}\n              refreshJobList={refreshJobList}\n            />\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default ListJobs;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}